---
// import "../styles/main.scss";
import Image from "astro/components/Image.astro";
import Computerframe from "../images/computer.png";
import slide1 from "../images/ranges.png";
import slide2 from "../images/rplgc.png";
import slide3 from "../images/member.png";
import slide4 from "../images/OTA.png";
import slide5 from "../images/shearing-shed.png";
import slide6 from "../images/plk.png";
import slide7 from "../images/mpi.png";
import slide8 from "../images/murphy-fresh.png";

const framedImages = [
  {
    src: slide1,
    alt: "slide1",
    width: 1535,
    height: 955,
    class: "slide-image",
  },
  {
    src: slide2,
    alt: "slide2",
    width: 1535,
    height: 955,
    class: "slide-image",
  },
  {
    src: slide3,
    alt: "slide3",
    width: 1535,
    height: 955,
    class: "slide-image",
  },
  {
    src: slide4,
    alt: "slide4",
    width: 1535,
    height: 955,
    class: "slide-image",
  },
  {
    src: slide5,
    alt: "slide5",
    width: 1535,
    height: 955,
    class: "slide-image",
  },
  {
    src: slide6,
    alt: "slide6",
    width: 1535,
    height: 955,
    class: "slide-image",
  },
  {
    src: slide7,
    alt: "slide7",
    width: 1535,
    height: 955,
    class: "slide-image",
  },
  {
    src: slide8,
    alt: "slide8",
    width: 1535,
    height: 955,
    class: "slide-image",
  },
];
---

<div class="curved-border">
  <svg class="curve" viewBox="0 0 1440 133" preserveAspectRatio="none">
    <g>
      <path
        id="path-1"
        d="M-0,72s180-36.13230792814181 360-0 180-136.8176787775407 360-0 180-111.71350672592155 360-0 180-16.099548216277995 360-0 V144H-1440Z"
        fill="#425E5E"></path>
      <path
        id="path-2"
        d="M-0,72s180-111.8581060065802 360-0 180-15.871579969997365 360-0 180-129.00900851770052 360-0 180-123.53614958975476 360-0 V144H-1440Z"
        fill="#425E5E"
        style="opacity: 0;"></path>
    </g>
  </svg>
</div>
<main id="why" class="section-wrapper">
  <section class="section-content">
    <div class="headline-wrapper pure-g">
      <h1 class="pure-u-md-2-5">
        Why
        <span class="white"
          ><br />
          Revitalise?
        </span>
      </h1>
      <p class="white pure-u-md-3-5">
        A modern website encourages visitors to stay longer and find what they
        need. A fresh look reinforces professionalism and relevance. It can
        yield significant returns.
      </p>
    </div>
    <div class="image-wrapper">
      <div class="image-frame">
        <Image src={Computerframe} alt="Computer Frame" />
      </div>
      {
        framedImages.map((image) => (
          <Image
            src={image.src}
            alt={image.alt}
            width={image.width}
            height={image.height}
            class={image.class}
          />
        ))
      }
    </div>

    <div class="quote-button">
      <button class="mart-button-1">Request quote</button>
    </div>
  </section>
</main>
<style lang="scss">
  .white {
    color: var(--pure-neutral-light);
  }
  .curved-border {
    position: relative;
    background: var(--pure-secondary-bg);
    padding-bottom: 8rem;
  }
  .curve {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    max-width: 100vw;
    height: 132px;
    color: var(--pure-primary-bg);
  }
  .headline-wrapper {
    > h1 {
      align-content: center;
      font-size: 4em;
    }
    > p {
      align-content: center;
    }
  }
  .section-wrapper {
    position: relative;
    background-color: var(--pure-primary-bg);
    padding: 0 0 0 0;
    margin: 0;
  }
  .section-content {
    width: 80%;
    margin: auto;
  }
  .image-wrapper {
    position: relative;
    margin: 3em auto 0 auto;
    // width: 80%;
    & .image-frame {
      text-align: center;
      > img {
        max-width: 80%;
        max-height: fit-content;
      }
    }

    & .slide-image {
      max-width: 80%;
      max-height: fit-content;
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      opacity: 0;
    }
  }
  .quote-button {
    position: relative;
    bottom: -20px;
    text-align: center;
  }
  button.mart-button-1 {
    border-radius: 9999px;
    padding: 15px;
    min-width: 200px;
    background: var(--pure-primary);
    color: var(--pure-neutral-light);
    box-shadow: 0px 3px 7px 0px rgba(0, 0, 0, 0.35);
    border: none;
    font-family: "Playfair Display", serif;
    font-weight: 400;
    font-style: italic;
    margin-top: 40px;
  }
  @media screen and (max-width: 768px) {
    .image-wrapper .image-frame img,
    .image-wrapper .slide-image {
      max-width: 100%;
    }
    .curve {
      height: 36px;
    }
    .curved-border {
      padding-bottom: 2rem;
    }
  }
</style>
<script>
  import { onScroll, animate, svg, stagger, linear } from "animejs";
  const path1 = document.getElementById("path-1");
  const path2 = document.getElementById("path-2");
  function animateCurve() {
    // Morph #path-1 into #path-2
    animate(path1, {
      d: svg.morphTo(path2),
      ease: linear(0, "0.5 50%", "0.7 75%", 1),
      duration: 3000,
      alternate: true,
      autoplay: onScroll({
        container: "curved-border",
        sync: 1,
        enter: "max bottom",
        leave: "min top",
      }),
    });
  }
  animateCurve();

  function animateImagesSequentially() {
    animate(".slide-image", {
      // Select all images
      opacity: [0, 1], // Animate from opacity 0 to 1
      duration: 800, // Duration of each individual fade in (ms)
      delay: stagger(2500, { start: 100 }),
      easing: "easeInOutQuad",
      loop: true, // Loop the animation
      direction: "alternate", // Reverse the animation back
      // Optionally, add a loop delay or other properties
      loopDelay: 4000,
    });
  }
  animateImagesSequentially();
</script>
